                                       size_t max)
{
	size_t length;

	assert(source);
	assert(max > 0);

	length = trio_length(source);
	if (length > max)
	{
		length = max;
	}
	return int