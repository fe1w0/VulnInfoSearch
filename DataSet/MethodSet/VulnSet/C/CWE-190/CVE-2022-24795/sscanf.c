TE: on error the offset will point to the first char of the
 *  invalid utf8 */
#def