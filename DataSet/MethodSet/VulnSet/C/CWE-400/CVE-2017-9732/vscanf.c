char *	buffer = (char *)buf;

	nleft = len;
	while (nleft > 0) {
		nwrit