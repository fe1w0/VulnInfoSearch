put_or_allocate_output(
 