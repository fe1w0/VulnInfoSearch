 while (write(fid, fbuf, siz) < 0 && GetErrno() == EINTR)
     