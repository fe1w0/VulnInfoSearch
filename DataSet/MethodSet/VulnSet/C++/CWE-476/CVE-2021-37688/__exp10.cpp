output_shift > 0 ? output_shift : 0;
    for (int c = 0; c < output_