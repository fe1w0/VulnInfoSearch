anouts != fanouts->end();

  if (from_exists && to_exists) {
    std::swap(from_fan