reportReadLimitReached() override;
#if !CAPNP_LITE
  kj::Maybe<kj::Own<ClientHook>> extractCap(uint index);
#endif  // !CAPNP_LITE

private:
  MessageReader* message;
  ReadLimiter readLimiter;
#if !CAPNP_LITE
  kj::Array<kj::Maybe<kj::Own<ClientHook>>> capTable;
#endif  // !CAPNP_LITE

  // Optimize for single-segment messages so that small messages are handle