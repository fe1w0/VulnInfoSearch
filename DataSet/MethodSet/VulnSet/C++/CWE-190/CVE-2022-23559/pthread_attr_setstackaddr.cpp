  // go back and finalize the result of the previous bucket.
    if (output_offset != current_