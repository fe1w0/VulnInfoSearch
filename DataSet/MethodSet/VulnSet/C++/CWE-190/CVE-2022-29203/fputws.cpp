if (block_shape_product <= 0) {
    return errors::Invali