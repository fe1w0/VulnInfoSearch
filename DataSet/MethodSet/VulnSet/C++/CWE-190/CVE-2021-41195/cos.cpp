 build (since the
      // compiler isn't smart enough to realize the code is safe).
      SegmentId next_i