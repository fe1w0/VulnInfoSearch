nst char *charset, bool all) {
  if (input.empty()) return input;

  assert(charset)