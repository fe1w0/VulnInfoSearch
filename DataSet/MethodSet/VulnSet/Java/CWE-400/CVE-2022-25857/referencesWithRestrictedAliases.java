public class ReferencesTest {
public void referencesWithRestrictedAliases() {
    // without alias restriction this size should occupy tons of CPU, memory and time to parse
    String bigYAML = createDump(35);
    // Load
    long time1 = System.currentTimeMillis();
    LoaderOptions settings = new LoaderOptions();
    settings.setMaxAliasesForCollections(40);
    settings.setAllowRecursiveKeys(true);
    Yaml yaml = new Yaml(settings);
    try {
        yaml.load(bigYAML);
        fail();
    } catch (Exception e) {
        assertEquals("Number of aliases for non-scalar nodes exceeds the specified max=40", e.getMessage());
    }
    long time2 = System.currentTimeMillis();
    float duration = (time2 - time1) / 1000;
    assertTrue("It should fail quickly. Time was " + duration + " seconds.", duration < 1.0);
}

}