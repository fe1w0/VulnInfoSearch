public class Utils
{
	public static SecureRandom randomSecure = new SecureRandom();
	public static String CHARSET_FOR_URL_ENCODING = "ISO-8859-1";
	public static final int IO_BUFFER_SIZE = 4 * 1024;
	public static final String TOKEN_ALPHABET = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";
	public static int copy(InputStream in, OutputStream out, int bufferSize, int sizeLimit)
			throws IOException
	{
		byte[] b = new byte[bufferSize];
		int read, total = 0;

		while ((read = in.read(b)) != -1)
		{
			total += read;

			if (sizeLimit > 0 && total > sizeLimit)
			{
				throw new IOException("Size limit exceeded");
			}

			out.write(b, 0, read);
		}

		return total;
	}
}