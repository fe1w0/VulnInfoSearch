)));
        __m128i retval = _mm_srli_epi16(total, log_weight);
        dev_assert(aavrg_vec_matches(retval, aligned_zz, context));
        ret