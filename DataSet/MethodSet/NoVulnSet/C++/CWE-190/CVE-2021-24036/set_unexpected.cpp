// The user's free function is not allowed to throw.
// (We are already in the m