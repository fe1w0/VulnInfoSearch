build (since the
      // compiler isn't smart enough to realize the code is safe).
      Index next_index = 0;
      if (en