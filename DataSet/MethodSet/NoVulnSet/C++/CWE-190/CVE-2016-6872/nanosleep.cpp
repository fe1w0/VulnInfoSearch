                        const String& end /* = "\r\n" */) {
  if (chunklen <= 0) {
    throw_inva