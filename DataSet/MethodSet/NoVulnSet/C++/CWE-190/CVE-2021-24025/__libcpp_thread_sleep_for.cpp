
  assertx(sockets.isArray());
  const auto& sock_array = sockets.asCArrRef();
  IterateKVNoInc(
    sock_array.get(),
    [&](TypedValue k, TypedValue v) {
      const pollfd &fd = fds.at(nfds++);
     