 // TODO(mrry): Investigate ways to avoid this unconditional check
    // if we can be sure that 