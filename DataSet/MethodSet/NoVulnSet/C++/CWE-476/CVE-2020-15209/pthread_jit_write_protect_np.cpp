                                     bool (*check_cancelled_func)(void*)) {
  cancellation_data_ = data;
  check_cancelled_f