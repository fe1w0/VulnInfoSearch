q));
    *act_max = std::min(qmax, tm