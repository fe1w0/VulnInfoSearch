 together.
    std::unique_ptr<int64_t[]> buffer(new int64_t[total_dim