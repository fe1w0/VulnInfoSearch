 { // no interpolants left; add the last segment if nonempty
        if (i < str.end) {
          schema->ap