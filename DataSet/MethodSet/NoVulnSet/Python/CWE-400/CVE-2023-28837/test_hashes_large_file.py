class FakeLargeFile:
    """
            A class that pretends to be a huge file (~1.3GB)
            """

    def __init__(self):
        self.iterations = 20000

    def read(self, bytes):
        self.iterations -= 1
        if not self.iterations:
            return b''
        return b'A' * bytes
self.assertEqual(hash_filelike(FakeLargeFile()), '187cc1db32624dccace20d042f6d631f1a483020')