'\n        Check that the file-upload field data contains a valid image (GIF, JPG,\n        PNG, etc. -- whatever Willow supports). Overridden from ImageField to use\n        Willow instead of Pillow as the image library in order to enable SVG support.\n        '
f = FileField.to_python(self, data)
if f is None:
    return None
if hasattr(data, 'temporary_file_path'):
    file = data
elif hasattr(data, 'read'):
    file = BytesIO(data.read())
else:
    file = BytesIO(data['content'])
try:
    f.image = willow.Image.open(file)
    f.content_type = image_format_name_to_content_type(f.image.format_name)
except Exception as exc:
    raise ValidationError(self.error_messages['invalid_image'], code='invalid_image') from exc
if hasattr(f, 'seek') and callable(f.seek):
    f.seek(0)
if f is not None:
    self.check_image_file_size(f)
    self.check_image_file_format(f)
    self.check_image_pixel_size(f)
return f