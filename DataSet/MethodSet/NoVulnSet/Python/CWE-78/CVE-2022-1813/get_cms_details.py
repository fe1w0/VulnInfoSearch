response = {}
cms_detector_command = 'python3 /usr/src/github/CMSeeK/cmseek.py --random-agent --batch --follow-redirect'
subprocess_splitted_command = cms_detector_command.split()
subprocess_splitted_command.append('-u')
subprocess_splitted_command.append(url)
process = subprocess.Popen(subprocess_splitted_command)
process.wait()
response['status'] = False
response['message'] = 'Could not detect CMS!'
parsed_url = urlparse(url)
domain_name = parsed_url.hostname
port = parsed_url.port
find_dir = domain_name
if port:
    find_dir += '_{}'.format(port)
print(url)
print(find_dir)
cms_dir_path = '/usr/src/github/CMSeeK/Result/{}'.format(find_dir)
cms_json_path = cms_dir_path + '/cms.json'
if os.path.isfile(cms_json_path):
    cms_file_content = json.loads(open(cms_json_path, 'r').read())
    if not cms_file_content.get('cms_id'):
        return response
    response = {}
    response = cms_file_content
    response['status'] = True
    try:
        shutil.rmtree(cms_dir_path)
    except Exception as e:
        print(e)
return response