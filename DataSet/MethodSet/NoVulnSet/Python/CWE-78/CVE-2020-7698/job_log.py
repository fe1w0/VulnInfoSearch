'\n    get log of jog\n    :param request: request object\n    :param client_id: client id\n    :param project_name: project name\n    :param spider_name: spider name\n    :param job_id: job id\n    :return: log of job\n    '
if request.method == 'GET':
    client = Client.objects.get(id=client_id)
    url = log_url(client.ip, client.port, project_name, spider_name, job_id)
    response = requests.get(url, timeout=5, headers={'Range': 'bytes=-1000'}, auth=(client.username, client.password) if client.auth else None)
    encoding = response.apparent_encoding
    if response.status_code == 404:
        return JsonResponse({'message': 'Log Not Found'}, status=404)
    text = response.content.decode(encoding, errors='replace')
    return HttpResponse(text)