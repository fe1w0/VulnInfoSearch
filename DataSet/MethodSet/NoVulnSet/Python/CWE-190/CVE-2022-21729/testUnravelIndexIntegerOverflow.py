def testUnravelIndexIntegerOverflow(self):
    with self.cached_session():
        for dtype in [dtypes.int32, dtypes.int64]:
            with self.assertRaisesRegex(errors.InvalidArgumentError, 'Input dims product is causing integer overflow'):
                indices = constant_op.constant(-1048576, dtype=dtype)
                if dtype == dtypes.int32:
                    value = 268435456
                else:
                    value = 9223372036854775807
                dims = constant_op.constant([value, value], dtype=dtype)
                self.evaluate(array_ops.unravel_index(indices=indices, dims=dims))