2shift(rmask, &d->rright, &d->rleft);
        mask2shift(gmask, &d->gright, &d-