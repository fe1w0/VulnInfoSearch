_return_val(conn, NULL);
    memset(conn, 0, sizeof(connection_t));

    conn->client = client;
    conn