static bool S_ends_with_blank_line(cmark_node *node) {
  while (true) {
    if (S_last_line_checked(node)) {
      return(S_last_line_blank(node));
    } else if ((S_type(node) == CMARK_NODE_LIST ||
                S_type(node) == CMARK_NODE_ITEM) && node->last_child) {
      S_set_last_line_checked(node);
      node = node->last_child;
      continue;
    } else {
      S_set_last_line_checked(node);
      return (S_last_line_blank(node));
    }
  }
}