    c->state = conn_new_cmd;

    // TODO: call conn_cleanup/fail/etc
    if (even